---
title: 'Extract File'
openapi: 'POST /extract'
---

import ExtractDocumentSource from '/snippets/extract-document-source.mdx';
import ExtractOptions from '/snippets/extract-options.mdx';
import ExtractStorageOptions from '/snippets/extract-storage-options.mdx';
import ExtractDeprecatedFields from '/snippets/extract-deprecated-fields.mdx';

## Overview

<Info>
  **Pipeline Step 1** — Extract is always the first step. After extraction, you can optionally [split](/api-reference/endpoint/split) the document into topics, then apply [schema extraction](/api-reference/endpoint/schema) to get structured data.
</Info>

Extract content from documents. Returns markdown or HTML formatted content with optional structured data extraction.

For documents over 70 pages, results are returned via S3 URL.

<Note>
  For large documents or batch processing workflows, set `async: true` to process asynchronously and poll for results via [GET /job/{'{'}jobId{'}'}](/api-reference/endpoint/poll).
</Note>

### Async Mode

Set `async: true` to return immediately with a job ID for polling:

```json
{
  "file_url": "https://example.com/document.pdf",
  "async": true
}
```

**Async Response (200):**

```json
{
  "job_id": "abc123-def456",
  "status": "pending",
  "message": "Document processing started"
}
```

Use `GET /job/{job_id}` to poll for completion.

## Request

<ExtractDocumentSource />

<ExtractOptions />

<ExtractStorageOptions />

<ExtractDeprecatedFields />

## Response

The response structure varies based on document size to optimize for different use cases.

### Standard Response (Under 70 Pages)

For documents under 70 pages, results are returned directly in the response body:

```json
{
  "markdown": "# Document Title\n\nExtracted content...",
  "page_count": 15,
  "extraction_id": "abc123-def456-ghi789",
  "extraction_url": "https://platform.runpulse.com/dashboard/extractions/abc123",
  "plan-info": {
    "pages_used": 15,
    "tier": "standard",
    "note": "Pulse Ultra"
  },
  "bounding_boxes": {
    "Title": [],
    "Text": [],
    "Tables": [],
    "Images": [],
    "markdown_with_ids": "<p data-bb-text-id=\"txt-1\">..."
  },
  "chunks": {
    "semantic": ["chunk 1...", "chunk 2..."],
    "header": ["section 1...", "section 2..."],
    "page": ["page 1...", "page 2..."],
    "recursive": ["part 1...", "part 2..."]
  }
}
```

#### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `markdown` | string | Clean markdown content extracted from the document. Present when `return_html` is `false` or omitted. |
| `html` | string | HTML representation of the document. Present when `return_html` is `true`. |
| `page_count` | integer | Total number of pages processed. |
| `extraction_id` | string (uuid) | Persisted extraction ID. Present when storage is enabled (default). Use with `/split` and `/schema`. |
| `extraction_url` | string | URL to view the extraction in the Pulse Platform. Present when storage is enabled. |
| `plan-info` | object | Billing information including pages used and plan tier. |
| `bounding_boxes` | object | Detailed bounding box data for document elements. See [Bounding Boxes](/api-reference/bounding-boxes) for details. |
| `structured_output` | object | ⚠️ **Deprecated response field** — present only when the deprecated `structured_output` input param was used. Use [`/schema`](/api-reference/endpoint/schema) post-extraction instead. |
| `chunks` | object | `{ semantic: [...], header: [...], page: [...], recursive: [...] }` — Document chunks by strategy (when `chunking` is enabled). |
| `input_schema` | object | Echo of the schema that was applied (when the deprecated `structured_output` param was used). |
| `schema_error` | string | Error message if schema processing failed (deprecated `structured_output` path only). |
| `schema_processing_time_seconds` | number | Time spent on schema processing (deprecated `structured_output` path only). |

### Large Document Response (70+ Pages)

For documents with 70 or more pages, the API returns a URL to fetch the complete results. This prevents timeout issues and reduces response payload size.

```json
{
  "is_url": true,
  "url": "https://pulse-studio-api.s3.amazonaws.com/results/abc123.json",
  "plan-info": {
    "pages_used": 150,
    "tier": "standard"
  }
}
```

#### Large Document Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `is_url` | boolean | Always `true` for large document responses. Use this to detect URL-based responses. |
| `url` | string | Pre-signed S3 URL containing the complete extraction results. Expires after 24 hours. |
| `plan-info` | object | Billing information including pages used and plan tier. |

#### Handling Large Document Responses

<CodeGroup>

```python Python
from pulse import Pulse

client = Pulse(api_key="YOUR_API_KEY")

# The SDK handles large document responses automatically
response = client.extract(
    file_url="https://www.impact-bank.com/user/file/dummy_statement.pdf"
)

# If the response contains is_url, fetch from S3
if hasattr(response, 'is_url') and response.is_url:
    import requests
    full_result = requests.get(response.url).json()
    print(full_result["markdown"])
else:
    print(response.markdown)
```

```typescript TypeScript
import { PulseClient } from 'pulse-ts-sdk';

const client = new PulseClient({ 
    headers: { 'x-api-key': 'YOUR_API_KEY' }
});

const response = await client.extract({
    fileUrl: "https://www.impact-bank.com/user/file/dummy_statement.pdf"
});

// Check if response is a URL reference
if ((response as any).is_url) {
    const fullResult = await fetch((response as any).url).then(r => r.json());
    console.log(fullResult.markdown);
} else {
    console.log(response.markdown);
}
```

```bash curl
# For large documents, the response contains a URL
curl -X POST https://api.runpulse.com/extract \
  -H "x-api-key: YOUR_API_KEY" \
  -F "file=@large_document.pdf"

# Response: {"is_url": true, "url": "https://...s3.amazonaws.com/..."}

# Fetch the actual content
curl "https://...s3.amazonaws.com/..."
```

</CodeGroup>

<Note>
  The S3 URL expires after 24 hours. If you need to access results after this period, ensure `storage.enabled` is `true` and retrieve results from your extraction library.
</Note>

## Example Usage

### Basic Extraction

<CodeGroup>

```python Python
from pulse import Pulse

client = Pulse(api_key="YOUR_API_KEY")

# Extract from URL
response = client.extract(
    file_url="https://www.impact-bank.com/user/file/dummy_statement.pdf",
    extract_figure=True,
    return_html=True
)

print(f"Markdown: {response.markdown}")
print(f"Extraction ID: {response.extraction_id}")
```

```typescript TypeScript
import { PulseClient } from 'pulse-ts-sdk';

const client = new PulseClient({ 
    headers: { 'x-api-key': 'YOUR_API_KEY' }
});

const response = await client.extract({
    fileUrl: "https://www.impact-bank.com/user/file/dummy_statement.pdf",
    extractFigure: true,
    returnHtml: true
});

console.log(`Markdown: ${response.markdown}`);
console.log(`Extraction ID: ${response.extraction_id}`);
```

```bash curl
# Extract from URL
curl -X POST https://api.runpulse.com/extract \
  -H "x-api-key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"file_url": "https://www.impact-bank.com/user/file/dummy_statement.pdf"}'
```

</CodeGroup>

### File Upload

<CodeGroup>

```python Python
# Upload and extract a local file
with open("document.pdf", "rb") as f:
    response = client.extract(
        file=f,
        extract_figure=True
    )
```

```typescript TypeScript
import * as fs from 'fs';

const fileBuffer = fs.readFileSync("document.pdf");
const blob = new Blob([fileBuffer], { type: 'application/pdf' });

const response = await client.extract({
    file: blob,
    extractFigure: true
});
```

```bash curl
curl -X POST https://api.runpulse.com/extract \
  -H "x-api-key: YOUR_API_KEY" \
  -F "file=@document.pdf"
```

</CodeGroup>

### Structured Data (Extract → Schema)

<Warning>
  The `structured_output` parameter on `/extract` is **deprecated**. Use the [`/schema`](/api-reference/endpoint/schema) endpoint after extraction instead. This gives you better control, re-runnability, and support for split-mode schemas.
</Warning>

**Recommended two-step approach:**

<CodeGroup>

```python Python
# Step 1: Extract the document
response = client.extract(
    file_url="https://www.impact-bank.com/user/file/dummy_statement.pdf"
)

extraction_id = response.extraction_id

# Step 2: Apply schema separately
schema_result = client.schema(
    extraction_id=extraction_id,
    schema_config={
        "schema": {
            "type": "object",
            "properties": {
                "total": {"type": "number"},
                "vendor": {"type": "string"}
            }
        },
        "schema_prompt": "Extract invoice total and vendor"
    }
)

print(schema_result.schema_output)
```

```typescript TypeScript
// Step 1: Extract the document
const response = await client.extract({
    fileUrl: "https://www.impact-bank.com/user/file/dummy_statement.pdf"
});

const extractionId = response.extraction_id;

// Step 2: Apply schema separately
const schemaResult = await client.schema.extractSchema({
    extraction_id: extractionId,
    schema_config: {
        schema: {
            type: "object",
            properties: {
                total: { type: "number" },
                vendor: { type: "string" }
            }
        },
        schema_prompt: "Extract invoice total and vendor"
    }
});

console.log(schemaResult.schema_output);
```

```bash curl
# Step 1: Extract the document
curl -X POST https://api.runpulse.com/extract \
  -H "x-api-key: YOUR_API_KEY" \
  -F "file=@invoice.pdf"

# Response includes extraction_id: "abc123-..."

# Step 2: Apply schema
curl -X POST https://api.runpulse.com/schema \
  -H "x-api-key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "extraction_id": "abc123-...",
    "schema_config": {
      "schema": {"type": "object", "properties": {"total": {"type": "number"}, "vendor": {"type": "string"}}},
      "schema_prompt": "Extract invoice total and vendor"
    }
  }'
```

</CodeGroup>

### Page Range and Chunking

<CodeGroup>

```python Python
response = client.extract(
    file_url="https://www.impact-bank.com/user/file/dummy_statement.pdf",
    pages="1-5,10",  # 1-indexed
    chunking="semantic,page",
    chunk_size=1000
)
```

```typescript TypeScript
const response = await client.extract({
    fileUrl: "https://www.impact-bank.com/user/file/dummy_statement.pdf",
    pages: "1-5,10",  // 1-indexed
    chunking: "semantic,page",
    chunkSize: 1000
});
```

```bash curl
curl -X POST https://api.runpulse.com/extract \
  -H "x-api-key: YOUR_API_KEY" \
  -F "file=@document.pdf" \
  -F "pages=1-5,10" \
  -F "chunking=semantic,page" \
  -F "chunk_size=1000"
```

</CodeGroup>

### Disable Storage

<CodeGroup>

```python Python
response = client.extract(
    file_url="https://www.impact-bank.com/user/file/dummy_statement.pdf",
    storage={"enabled": False}
)
```

```typescript TypeScript
const response = await client.extract({
    fileUrl: "https://www.impact-bank.com/user/file/dummy_statement.pdf",
    storage: { enabled: false }
});
```

```bash curl
curl -X POST https://api.runpulse.com/extract \
  -H "x-api-key: YOUR_API_KEY" \
  -F "file=@document.pdf" \
  -F 'storage={"enabled": false}'
```

</CodeGroup>
